# Домашнее задание к занятию "5.3. Контейнеризация на примере Docker"

## Задача 1

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование докера? Или лучше подойдет виртуальная машина, физическая машина? Или возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- Высоконагруженное монолитное java веб-приложение;

Ответ:
  
Преимущества докера в разбитие на небольшие слои и сервисы которые можно переиспользовать между проектами.
В случае с монолитом это будет большой тяжелый контейнер с кучей софта. Тут лучше виртуалку отдельную использовать. 
В то же время, если можно выделить отдельно разные сервисы и БД то можно использовать и докер.

- Go-микросервис для генерации отчетов;
  
Ответ:
  
Тут докер подойдет отлично, в контейнер выделить только, то что нужно микросервису и все будет быстро.
  

- Nodejs веб-приложение;
  
Ответ:
Подходит, можно даже тестировать с разными версиями ноды.

- Мобильное приложение c версиями для Android и iOS;
- База данных postgresql используемая, как кэш;
  
Ответ:
Для кешей не очень хорошо использовать, т.к. в случае отказа может сразу все полететь что туда обращалось.

- Шина данных на базе Apache Kafka;
  Тут не очень понимаю про что речь, но мне кажется для шины данных докер не очень подходит.

- Очередь для Logstash на базе Redis;
  
Ответ:
  Вроде можно.
  
- Elastic stack для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
  
Ответ:
  Тут подходит, по крайней мере у нас ELK стек в докере живет нормально.
  
- Мониторинг-стек на базе prometheus и grafana;
 
Ответ:
  
Да, можно, много образов есть уже готовых 

- Mongodb, как основное хранилище данных для java-приложения;

Ответ: 

Нет БД лучше не хранить в докере
  

- Jenkins-сервер.

Ответ:

Можно вроде, но не уверен

## Задача 2

Сценарий выполения задачи:

- создайте свой репозиторий на докерхаб;
- выберете любой образ, который содержит апачи веб-сервер;
- создайте свой форк образа;
- реализуйте функциональность:
  запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m kinda DevOps now</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на докерхаб-репо.

Сделал на основе httpd
запускается:

```docker run -dit --name my-running-apache -p 8080:80 enotys/myhttpd:netology```

https://hub.docker.com/repository/docker/enotys/myhttpd

## Задача 3

- Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку info из текущей рабочей директории на хостовой машине в /share/info контейнера;

```docker run -itd --mount src="$(pwd)",target=/share/info,type=bind centos /bin/bash```

- Запустите второй контейнер из образа debian:latest в фоновом режиме, подключив папку info из текущей рабочей директории на хостовой машине в /info контейнера;

```docker run -itd --mount src="$(pwd)",target=/info,type=bind debian:latest /bin/bash```

- Подключитесь к первому контейнеру с помощью exec и создайте текстовый файл любого содержания в /share/info ;

```docker exec -it 44729ecabd31 bash```

```touch centosFile.txt```

```vi centosFile.txt```

- Добавьте еще один файл в папку info на хостовой машине;

```touch hostFile.txt```

- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /info контейнера.

```
MacBook-Pro-enot:info enot$ docker exec -it f76c16e7a346 bash
root@f76c16e7a346:/# ls
bin  boot  dev	etc  home  info  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@f76c16e7a346:/# cd info/
root@f76c16e7a346:/info# ls
centosFile.txt	hostFile.txt
root@f76c16e7a346:/info#
```
