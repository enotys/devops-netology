# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
  

  Документо-ориентированные БД MongoDb (хорошо работает с json и позволяет хранить не строго структурированные данные) 
  или реляционная PostgreSQL (тоже есть возможность работы с JSON и JSONB и в целом шире возможности) 

- Склады и автомобильные дороги для логистической компании
  

  Тут напрашивается NOSQL графовые т.к. вся логистика это графы по своей сути :) Например Amazon Neptune;
  Но по факту и реляционные MySql и PostgreSQL используют повсеместно, для простых задач.

- Генеалогические деревья


Теоретически можно использовать сетевые базы данных (подтип иерархических, но с несколькими предками 
  (т.к. у одного человека родителей > 1)) Но по факту тоже самое можно реализовать на реляционной БД.
  
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
  

  Redis идеально подходит т.к. имеет встроенный механизм TTL для этого
  
- Отношения клиент-покупка для интернет-магазина


Тут можно использовать реляционные БД или key-value, если только связка нужна

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись) (AP т.к. нарушается консистентность С (PA/EL))
- При сетевых сбоях, система может разделиться на 2 раздельных кластера (СA Так как для P не выполнятся (PA/EC))
- Система может не прислать корректный ответ или сбросить соединение (CP т.к. availability не выполняется (PC/EC))

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему? 

Нет. Это противопоставленные друг-другу принципы. Один ACID предполагает гарантию устойчивого состояния и консистентности данных за счет транзакций, 
в то время как BASE это не гарантирует.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/).
Что это за система? Какие минусы выбора данной системы?

Это системы например Redis, где реализован механизм Publisher/Subscriber. Где можно для данных задавать TTL (время жизни)
Обычно реализуется с помощью очереди. Аналогично есть еще продукты от Microsoft (Azure Service Bus) и Amazon (Amazon Simple Notification Service) или RabbitMQ, ZeroMQ
Основные минусы таких систем - Данные асинхронно обрабатываются и мы получаем задержку. Так же нет возможности гарантировать консистентность в определенный момент времени.
Ну и нужно понимать, что мы не гарантируем доставку сообщений (Если будет сбой и подписчики не смогут обрабатывать свои сообщения, то может возникнуть коллапс и все очередь встанет. Чтобы это разрулить используется механизм Dead-Letter)
Но он тоже не гарантирует 100% обработку сообщений позднее, а скорее как индикатор возникших проблем. 

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
